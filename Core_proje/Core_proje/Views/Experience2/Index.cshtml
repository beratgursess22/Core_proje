@using EntityLayer.Concrete
@model List<Experience>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_NewAdminLayout.cshtml";
}

<div class="col-md-6">
	<div class="p-2">
		<button type="button" id="getlistall" class="btn btn-outline-primary">Verileri Getir</button>
		<button type="button" id="adduser" class="btn btn-outline-info">Kaydet</button>
		<button type="button" id="id" class="btn btn-outline-warning">ID ile getir</button>
		<button type="button" id="delete" class="btn btn-outline-danger">Sil</button>
		<button type="button" id="update" class="btn btn-outline-success">Güncelle</button>
	</div>
</div>

<h4 class="text-center">Deneyim Listesi</h4>
<div class="p-2" id="Listexperience">

</div>

<br />

<div class="p-2" id="Listbyidexperience">
</div>

<div class="col-md-12">
	<h5> Ekleme Paneli</h5>
	<input type="text" class="form-control" id="name" placeholder="Ad" />
	<br />
	<input type="text" class="form-control" id="date" placeholder="Tarih" />
</div>

<br />

<div class="col-md-12">
	<h5> ID'ye Göre Getirme Paneli</h5>
	<input type="text" class="form-control" id="id" placeholder="Id Giriniz" />
</div>

<br />
<div class="col-md-12">
	<h5> Silme Paneli</h5>
	<input type="text" class="form-control" id="expid" placeholder="Id Giriniz" />
</div>


@section Scripts
{
	<script>
		$("#getlistall").click(function () {
			$.ajax({
				contentType: "application/json",
				dataType: "json",
				type: "Get",
				url: "/Experience2/ListExperience/",

				succes: function (funk) {
					let users = jQuary.parse.JSON(funk);
					console.log(users);

					let htmlst = "<table class=table table-bordered> <tr> <th> ID</th> <th> Başlık </th> <th> Tarih </th> </tr>";
					$.each(values, (index, value) => {
						htmlst += `<tr> <td>${value.ExperienceID} </td> <td> ${value.Name} </td> <td> ${value.Date} </td> </tr>`
					});
					htmlst += "</table>";
					$("#Listexperience").html(htmlst);
				}
			});
		});

		$("#adduser").click(function () {
			let values = {
				Name: $("#name").val(),
				Date: $("#date").val()
			};

			$.ajax({
				type: "Post",
				url: "/Experience2/AddExperience/",
				data: values,
				success: function (funk1) {
					let result = jQuary.parseJSON(funk1);
					alert(result.Name + " Başarlı Bir Şekilde Eklendi");
				}
			});
		});

		$("#id").click(x => {
			let id = $("#id").val();

			$.ajax({
				contentType: "application/json",
				dataType: "json",
				type: "Get",
				url: "/Experience2/GetById",
				data: { ExperienceID: id },
				success: function (funk2) {
					let result = JQuary.parseJSON(funk2);
					console.log(result);
					let htmlstr = "<table class=table table-bordered> <tr> <th> ID</th> <th> Deneyim ID </th> <th> Deneyim Başlığı </th> </tr>";
					$.each(values, (index, value) => {
						htmlstr += `<tr> <td>${value.ExperienceID} </td> <td> ${value.Name} </td> </tr>`
					});
					htmlstr += "</table>";
					$("#Listbyidexperience").html(htmlstr);
					
				}
			});

		});

		$("#delete").click(x => {
			let id = $("#expid").val();
			$.ajax({
				url: "/Experience/DeleteExperience/" + id,
				type: "post",
				contentType: "application/json",
				dataType: "json",
				success: function (funk3) {
					loadData();
				}
			});
		});





	</script>
}
<script src="~/lib/jquery/dist/jquery.js"></script>
